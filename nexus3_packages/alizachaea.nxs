{"type":"group","name":"alizachaea v1.2","enabled":true,"items":[{"type":"alias","name":"","enabled":true,"actions":[{"type":"script","enabled":true,"script":"if(args[1] == \"reload\" && args[2] == null){\n  run_function(\"onInstall\", {}, \"eventStream3\");\n} else if (nexusclient.aliz == undefined) {\n  display_notice(\"The alizachaea package failed to load.\");\n} else {\n  nexusclient.aliz.runAlias(\"aa\", args);\n}\n"}],"text":"^aa\\s+(\\w+)(\\s+.+)?$","matching":"regexp","whole_words":true,"case_sensitive":true,"prefix_suffix":true},{"type":"alias","name":"reload alizachaea","enabled":true,"actions":[{"type":"script","enabled":true,"script":"run_function(\"onInstall\", {}, \"eventStream3\");\n"}],"text":"^reload alizachaea$","matching":"regexp","whole_words":true,"case_sensitive":true,"prefix_suffix":true},{"type":"function","name":"esLoad","enabled":true,"code":"import('https://unpkg.com/alizachaea/alizachaea.js')\n  .then((aliz) => {\n    nexusclient.aliz = aliz;\n    nexusclient.display_notice(\"Loaded alizachaea package v1.2.\");\n})\n  .catch((err) => {\n      nexusclient.display_notice(\"alizachaea error: \" + err.message);\n});"},{"type":"function","name":"onBlock","enabled":true,"code":"let runLoad = true;\n\nif (nexusclient.aliz == undefined) {\n  if (nexusclient.alizachaea == undefined) {\n    nexusclient.alizachaea = {\n      \"load\": {\n        \"attempts\": 1,\n        \"lastAttemptTimestamp\": Date.now(),\n      }\n    };\n  } else {\n    let timeSinceLast = Date.now() - nexusclient.alizachaea.load.lastAttemptTimestamp;\n    // 10 load attemps per 12 hours is max allowed.\n    if (timeSinceLast/1000/3600 > 12) {\n      nexusclient.alizachaea.load.attempts = 1;\n    } else if (nexusclient.alizachaea.load.attempts < 10){\n      nexusclient.alizachaea.load.attempts++\n    } else {\n      runLoad = false\n    }\n  }\n} else {\n  runLoad = false;\n  nexusclient.aliz.onBlock(nexusclient.current_block);\n}\n\nif (runLoad) {\n      run_function(\"onInstall\", {}, \"eventStream3\");\n      nexusclient.aliz.onBlock(nexusclient.current_block);\n}\n"},{"type":"function","name":"onGMCP","enabled":true,"code":"if(args.gmcp_method === \"Room.Players\") {\n  set_variable(\"qtyRoomPlayers\", args.gmcp_args.length);\n}"},{"type":"function","name":"onInstall","enabled":true,"code":"const np = nexusclient.packages();\nif (!np.exists('eventStream3')) {\n  fetch(`https://unpkg.com/nexevent/eventStream3.nxs`, { cache: \"no-store\" })\n    .then((r) => r.json())\n    .then((d) => {\n      const p = np.create('eventStream3', 'placeholder');\n      p.name = \"eventStream3\";\n      const i = np.exists('eventStream3');\n      np.move(i - 1, 1);\n      np\n        .get(\"eventStream3\")\n        .apply(d, nexusclient.reflexes());\n    });\n}"},{"type":"function","name":"onUninstall","enabled":true,"code":"// Place any code here you'd like to autorun when the package is uninstalled"},{"type":"group","name":"togglers","enabled":true,"items":[{"type":"function","name":"toggler","enabled":true,"code":"let message = \"The \" + args.reflex_name + \" \" + args.reflex_type + \" is now \";\n\nlet setpoint = false;\nif (args.setpoint == \"on\" || args.setpoint == \"n\"){\n  setpoint = true;\n  message += \"on.\";\n} else if (args.setpoint == \"off\" || args.setpoint == \"f\") {\n  setpoint = false;\n  message += \"off.\";\n}\n\nlet reflex = reflex_find_by_name(args.reflex_type, args.reflex_name, true, false, \"alizachaea\");\n\nif (setpoint) {\n  reflex_enable(reflex);\n} else {\n  reflex_disable(reflex);\n}\n\ndisplay_notice(message);\n\n"},{"type":"alias","name":"auto-get-gold-toggle","enabled":true,"actions":[{"type":"script","enabled":true,"script":"let option = args[1];\nlet reflexArgs = { \"reflex_type\": \"group\", \"reflex_name\": \"auto-get-gold\", \"setpoint\": option }\n               \nrun_function(\"toggler\", reflexArgs, \"alizachaea\");"}],"text":"^\\s*autogetgold\\s*(on|off|n|f)\\s*$","matching":"regexp","whole_words":false,"case_sensitive":false,"prefix_suffix":true},{"type":"alias","name":"auto-follow-toggle","enabled":true,"actions":[{"type":"script","enabled":true,"script":"nexusclient.aliz.toggle(\"autoFollow\", args[1]);"}],"text":"^\\s*autofollow\\s*(on|off|n|f)\\s*$","matching":"regexp","whole_words":true,"case_sensitive":true,"prefix_suffix":true},{"type":"alias","name":"auto-board-toggle","enabled":true,"actions":[{"type":"script","enabled":true,"script":"nexusclient.aliz.toggle(\"autoBoardShip\", args[1]);"}],"text":"^\\s*autoboard\\s*(on|off|n|f)\\s*$","matching":"regexp","whole_words":true,"case_sensitive":true,"prefix_suffix":true},{"type":"alias","name":"auto-<set>-toggle","enabled":true,"actions":[{"type":"script","enabled":true,"script":"nexusclient.aliz.toggle(\"auto\"+args[1]+\"Toggle\", args[2]);"}],"text":"^\\s*auto(\\w+)Toggle\\s*(on|off|n|f)\\s*$","matching":"regexp","whole_words":true,"case_sensitive":true,"prefix_suffix":true}]},{"type":"group","name":"auto-get-gold","enabled":true,"items":[{"type":"trigger","name":"auto-get-gold","enabled":true,"actions":[{"type":"script","enabled":true,"script":"let qtyRoomPlayers = get_variable(\"qtyRoomPlayers\");\n\nif (qtyRoomPlayers == 1) {\n   send_command(\"GET GOLD\", false);\n}\n"}],"text":"^.*There (?:is|are) .+ golden sovereigns? here.+$","matching":"regexp","whole_words":false,"case_sensitive":false},{"type":"trigger","name":"auto-get-gold","enabled":true,"actions":[{"type":"script","enabled":true,"script":"let qtyRoomPlayers = get_variable(\"qtyRoomPlayers\");\n\nif (qtyRoomPlayers == 1) {\n   send_command(\"GET GOLD\", false);\n}\n"}],"text":"^.*Twinkling and gleaming, a large pile of golden sovereigns rests here.+$","matching":"regexp","whole_words":false,"case_sensitive":false},{"type":"trigger","name":"auto-get-gold","enabled":true,"actions":[{"type":"script","enabled":true,"script":"let qtyRoomPlayers = get_variable(\"qtyRoomPlayers\");\n\nif (qtyRoomPlayers == 1) {\n   send_command(\"GET GOLD\", false);\n}\n"}],"text":"^.*A.+pile of golden sovereigns twinkles and gleams.+$","matching":"regexp","whole_words":false,"case_sensitive":false}]}],"description":"Reflexes made by Alizais v1.2 November 13, 2024"}
